<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>EKO Form</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
</head>
<body>

<div class="container">

    <img src="Logo_HRS.png" alt="logohrs" height="50" width="50"  style="display: block;margin: auto;">
    <h2>EVALUASI KOMPETENSI OPERATOR</h2>
    
    <div class="card">
        <b style="font-size: 15px; color: rgb(6, 5, 5); margin-bottom: 1%;">Lanjutan Draft</b>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="tokenInput" placeholder="Contoh: EP001" style="flex: 2; text-transform: uppercase;">
            <button type="button" id="btnCari" onclick="cariDraft()" style="flex: 1; background: #28a745; color: white; border: none; border-radius: 10px; cursor: pointer;">CARI <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
        <p style="font-size: 11px; color: rgb(239, 5, 5); margin-top: -2%;">*Kosongkan jika ingin membuat evaluasi baru.</p>
    </div>

<div class="input-group">
    <input type="tel" id="nrp" placeholder="NRP Operator" oninput="cariNama()" inputmode="numeric">
</div>

<div class="input-group">
    <input type="text" id="nama" placeholder="Nama akan muncul otomatis..." readonly>
</div>

<select id="unit" onchange="loadSoal()">
  <option value="">Pilih Unit</option>

  <option disabled>── HAULER ──</option>
  <option value="DTS">Small Hauler</option>
  <option value="DTM">Medium Hauler</option>

  <option disabled>── EXCAVATOR ──</option>
  <option value="EXCOB">Excavator OB</option>
  <option value="EXCOAL">Excavator COAL</option>
  <option value="EXCSUP">Excavator Support</option>

  <option disabled>── DOZER ──</option>
  <option value="DZS">Dozer Small</option>
  <option value="DZM">Dozer Medium</option>

  <option disabled>── UNIT SUPPORT ──</option>
  <option value="WT">Water Truck</option>
  <option value="LTFT">Lube Truck / Fuel Truck</option>
  <option value="CT">Crane Truck</option>
  <option value="Grader">Motor Grader</option>
  <option value="Compact">Compact</option>

</select>

<input id="No_Unit" placeholder="Nomor Unit (Diawali kode HDT/HEX/HDZ)">

<select id="Evaluator">
  <option value="">Pilih Evaluator</option>
  <option disabled>── Instruktur Track ──</option>
  <option>Kusnadi</option>
  <option>Abdul Wahab</option>
  <option>Padri</option>
  <option>Agung Irawan</option>
  <option>Seto Hariyono</option>
  <option>Khoirin Nafarin</option>

  <option disabled>── Instruktur Wheel ──</option>
  <option>Rejo Susanto</option>
  <option>Sugeng Wahyudi</option>
  <option>Edy Suwoyo</option>
  <option>Edi Mulyono</option>
  <option>Ahmad Rosdi</option>
  <option>Wahidinnor Zahrani</option>
  <option>Ahyat Firdaus</option>
</select>

<input type="date" id="Tanggal_evaluasi">


<div id="soalContainer"></div>

<div id="modalOverlay" class="modal-overlay">
    <div id="summaryBox" class="summary-box" style="display: none;">
        <h3>RINGKASAN EVALUASI</h3>
        <hr>
        <div class="summary-item" style="font-weight: 800;"><span>Total Soal:</span> <b id="sumTotal">0</b></div>
        <div class="summary-item"><span>Jawaban YA:</span> <b id="sumYa" style="color: green;">0</b></div>
        <div class="summary-item"><span>Jawaban TIDAK:</span> <b id="sumTidak" style="color: red;">0</b></div>
        <div class="summary-item"><span>TIDAK DIUJI:</span> <b id="sumTdkUji" style="color: orange;">0</b></div>
        <div class="summary-item"><span>BELUM DIISI:</span> <b id="sumBelum" style="color: gray;">0</b></div>
        
        <div class="summary-item" style="background: #f8f9fa; border-radius: 8px; margin-top: 10px; padding: 15px; border: 1px solid #ddd;">
            <span><b>NILAI AKHIR:</b></span> 
            <b id="sumNilai" style="font-size: 20px; color: #007bff;">0</b>
        </div>

        <p style="text-align: left; font-size: 14px; font-weight: bold; margin-top: 15px; margin-bottom: 5px;">Tanda Tangan Operator:</p>
        <div style="border: 2px dashed #ccc; border-radius: 8px; background: #fff; overflow: hidden;">
            <canvas id="signature-pad" style="width: 100%; height: 150px; touch-action: none; cursor: crosshair;"></canvas>
        </div>
        <div style="text-align: right;">
            <button type="button" onclick="clearSignature()" style="background:none; border:none; color:red; font-size: 12px; cursor: pointer; padding: 5px;">✖ Hapus Tanda Tangan</button>
        </div>

        <div class="btn-group-modal">
            <button class="btn-modal-kembali" onclick="closeSummary()">KEMBALI</button>
            <button id="btnKirimFinal" class="btn-modal-kirim" onclick="kirimFinal()">KIRIM DATA</button>
        </div>
    </div>
</div>

<div style="display: flex; gap: 10px; margin-top: 20px;">
    <button type="button" id="btnSimpanDraft" class="submit" style="background-color: #2f00ff; flex: 1; margin-top: 0;" onclick="simpanDraft(this)">
        <i class="fa-solid fa-floppy-disk"></i> SIMPAN DRAFT
    </button>
    
    <button type="button" id="btnSubmitFinal" class="submit" style="background-color: #28a745; flex: 1; margin-top: 0;" onclick="submitForm()">
        <i class="fa-solid fa-paper-plane"></i> SUBMIT FINAL
    </button>
</div>

<script src="script.js"></script>
</body>
</html>
